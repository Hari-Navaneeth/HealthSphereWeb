<div class="card flex flex-column">
    <p-steps [model]="getSteps()" [readonly]="false" [activeIndex]="activeStepIndex"
        (activeIndexChange)="onStepChange($event)"></p-steps>
    <ng-container [ngSwitch]="activeStepIndex">
        <ng-container *ngSwitchCase="0">
            <div class="flex flex-wrap">
                <div class="flex flex-wrap col-12 md:col-6 align-content-start">
                    <div class="field col-12 p-0 pb-2 text-xl font-semibold">
                        Personal Information
                    </div>
                    <div *ngFor="let field of patientPersonalInformationFields" class="field col-12 md:col-6 py-2">
                        <app-common-input [property]="field" [(value)]="patientInfoModel[field.id]"
                            (valueChange)="updateModel($event,field)"></app-common-input>
                    </div>
                </div>
                <div class="flex flex-wrap col-12 md:col-6 align-content-start">
                    <div class="field col-12 p-0 pb-2 text-xl font-semibold">
                        Contact Information
                    </div>
                    <div class="field col-12 py-2">
                        <app-common-input [property]="patientAddressField"
                            [(value)]="patientInfoModel[patientAddressField.id]"
                            (valueChange)="updateModel($event,patientAddressField)"></app-common-input>
                    </div>
                    <div *ngFor="let field of patientContactInformationFields" class="field col-12 md:col-6 py-2">
                        <app-common-input [property]="field" [(value)]="patientInfoModel[field.id]"
                            (valueChange)="updateModel($event,field)"></app-common-input>
                    </div>
                </div>
            </div>
            <div class="flex justify-content-end">
                <button pButton pRipple type="button" [label]="personalInfoSubmitted ? 'Update & Move' : 'Next'"
                    (click)="submit()" class="p-button-outlined p-button-raised p-button-success"
                    icon="pi pi-arrow-right" iconPos="right"></button>
            </div>
        </ng-container>
        <ng-container *ngSwitchCase="1">
            <div class="flex flex-wrap col-12 align-content-start">
                <div *ngFor="let field of patientExtraInformationFields" class="field col-12 md:col-4 py-2">
                    <app-common-input [property]="field" [(value)]="patientInfoModel[field.id]"
                        (valueChange)="updateModel($event,field)"></app-common-input>
                </div>
            </div>
            <div class="flex justify-content-between">
                <button pButton pRipple type="button" label="Back" (click)="back()"
                    class="p-button-outlined p-button-raised p-button-danger" icon="pi pi-arrow-left"
                    iconPos="left"></button>
                <button pButton pRipple type="button" label="Next" (click)="submit()"
                    class="p-button-outlined p-button-raised p-button-success" icon="pi pi-arrow-right"
                    iconPos="right"></button>
            </div>
        </ng-container>
        <ng-container *ngSwitchCase="2">
            <div class="flex flex-wrap col-12 align-content-start" *ngIf="activeStepIndex == 2">
                <div *ngFor="let field of patientDoctorInformationFields" class="field col-12 md:col-3 py-2">
                    <app-common-input [property]="field" [(value)]="patientInfoModel[field.id]"
                        (valueChange)="updateModel($event,field)"></app-common-input>
                </div>
            </div>
            <div class="flex justify-content-between">
                <button pButton pRipple type="button" label="Back" (click)="back()"
                    class="p-button-outlined p-button-raised p-button-danger" icon="pi pi-arrow-left"
                    iconPos="left"></button>
                <button pButton pRipple type="button" label="Done" (click)="submit()"
                    class="p-button-outlined p-button-raised p-button-success" icon="pi pi-check"
                    iconPos="right"></button>
            </div>
        </ng-container>
        <!-- <ng-container *ngSwitchDefault>Load Step</ng-container> -->
    </ng-container>
</div>