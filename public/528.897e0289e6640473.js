"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[528],{6528:(L,_,d)=>{d.r(_),d.d(_,{PhysicianModule:()=>R});var u=d(7538),i=d(4946),h=d(3113),T=d(1687),m=d(7870),S=d(5219),v=d(707),x=d(6340),P=d(8402);function N(s,c){1&s&&(i.TgZ(0,"div",6),i._uU(1," Doctor Management "),i.qZA())}function M(s,c){if(1&s){const a=i.EpF();i.TgZ(0,"p-button",7),i.NdJ("click",function(){i.CHM(a);const e=i.oxw();return i.KtG(e.addPhysician())}),i.qZA()}}let A=(()=>{class s{constructor(a,n,e,l){this._physicianService=a,this._router=n,this._toasterService=e,this._sharedService=l,this.tableData={data:[],columns:[{header:"Doctor Name",field:"fullName",columnType:"Text"},{header:"Specialist",field:"specialist",columnType:"Text"},{header:"Email",field:"email",columnType:"Text",align:"center"},{header:"Phone",field:"phoneNumber",columnType:"Phone"},{header:"Action",columnType:"Action",align:"center",actions:[{icon:"pi pi-eye",class:"p-button-info",label:"View"},{icon:"pi pi-pencil",class:"p-button-warning",label:"Edit"},{icon:"pi pi-trash",class:"p-button-danger",label:"Delete"}]}],count:0},this.getPhysician=(t={limit:10,offset:0})=>{this._physicianService.getPhysicians(t).subscribe(({data:o,count:r})=>{console.log(o,r),this.tableData.data=JSON.parse(JSON.stringify(o)).map(p=>({...p,fullName:[p.firstName,p.lastName].join(" "),age:String(this._sharedService.calculateAge(p.dateOfBirth))})),this.tableData.count=r})},this.addPhysician=()=>this._router.navigate(["/physician/add"]),this.viewPhysician=({_id:t})=>this._router.navigate(["/physician/view",t]),this.editPhysician=({_id:t})=>this._router.navigate(["/physician/edit",t]),this.onActionClick=t=>{switch(console.log(t),t.action){case"View":this.viewPhysician(t.rowData);break;case"Edit":this.editPhysician(t.rowData);break;case"Delete":this.deletePhysician(t.rowData)}},this.deletePhysician=({_id:t})=>{this._physicianService.deletePhysician(t).subscribe(o=>{this.getPhysician()},o=>{this._toasterService.error(o.error.message)})}}ngOnInit(){this.getPhysician()}static#i=this.\u0275fac=function(n){return new(n||s)(i.Y36(h.E),i.Y36(u.F0),i.Y36(T.M),i.Y36(m.F))};static#e=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-physician"]],decls:6,vars:3,consts:[[1,"card","flex","flex-column"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],[1,"col-12","p-0"],["showExportButtons","true","fileName","Physician",3,"value","columns","totalRecords","onPageChange","onAction"],[1,"text-2xl","font-semibold","vertical-align-middle"],["label","Add Doctor","styleClass","p-button-raised",3,"click"]],template:function(n,e){1&n&&(i.TgZ(0,"div",0)(1,"p-toolbar",1),i.YNc(2,N,2,0,"ng-template",2),i.YNc(3,M,1,0,"ng-template",3),i.qZA(),i.TgZ(4,"div",4)(5,"app-common-table",5),i.NdJ("onPageChange",function(t){return e.getPhysician(t)})("onAction",function(t){return e.onActionClick(t)}),i.qZA()()()),2&n&&(i.xp6(5),i.Q6J("value",e.tableData.data)("columns",e.tableData.columns)("totalRecords",e.tableData.count))},dependencies:[S.jx,v.zx,x.o,P.u]})}return s})();var g=d(9239),b=d(1752),y=d(9030),f=d(6814),C=d(5160);function w(s,c){if(1&s){const a=i.EpF();i.TgZ(0,"div",7)(1,"app-common-input",3),i.NdJ("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.formModel[t.id]=e)})("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.updateModel(e,t))}),i.qZA()()}if(2&s){const a=c.$implicit,n=i.oxw();i.xp6(1),i.Q6J("property",a)("value",n.formModel[a.id])}}function E(s,c){if(1&s){const a=i.EpF();i.TgZ(0,"div",7)(1,"app-common-input",3),i.NdJ("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.formModel[t.id]=e)})("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.updateModel(e,t))}),i.qZA()()}if(2&s){const a=c.$implicit,n=i.oxw();i.xp6(1),i.Q6J("property",a)("value",n.formModel[a.id])}}let V=(()=>{class s{constructor(a,n,e,l){this._router=a,this._physicianService=n,this._validationService=e,this._sharedService=l,this.formModel={},this.loading=!1,this.formControls1=[{label:"First Name",required:!0,inputType:"Name",id:"firstName",validator:this._validationService.nameValidator},{label:"Last Name",required:!0,inputType:"Name",id:"lastName",validator:this._validationService.nameValidator},{label:"Date of Birth",inputType:"Date",required:!0,id:"dateOfBirth",maxDate:new Date,validator:t=>this._validationService.dateValidator(t)&&t<new Date},{label:"Age",inputType:"Name",id:"age",disabled:!0,maxLength:3,validator:this._validationService.numberValidator},{label:"Sex",inputType:"Dropdown",options:["Male","Female","Other"],optionTypeStr:!0,required:!0,id:"gender",validator:this._validationService.emptyValueValidator},{label:"Specialist",required:!0,inputType:"AutoComplete",id:"specialist",suggestions:["General","Cardiologist","Pediatrician","Neurologist"],validator:this._validationService.emptyValueValidator},{label:"Education",required:!0,inputType:"Text",id:"education",validator:this._validationService.emptyValueValidator},{label:"License No",required:!0,inputType:"Text",id:"licenseNo",validator:this._validationService.emptyValueValidator}],this.addressControl={label:"Address",required:!0,inputType:"TextArea",id:"address",rows:2,validator:this._validationService.stringValidator,maxLength:500},this.formControls2=[{label:"City",required:!0,inputType:"AutoComplete",id:"city",validator:this._validationService.stringValidator,suggestions:b},{label:"State",required:!0,inputType:"Dropdown",id:"state",validator:this._validationService.emptyValueValidator,options:g},{label:"Zip",required:!0,inputType:"Number",id:"zipCode",maxLength:6,validator:this._validationService.zipCodeValidator},{label:"Phone",required:!0,inputType:"Number",id:"phoneNumber",maxLength:10,validator:this._validationService.phoneValidator,preAddon:"pi-phone"},{label:"Email",required:!0,inputType:"Text",id:"email",validator:this._validationService.emailValidator,preAddon:"pi-envelope"}],this.submitTried=!1,this.validator=t=>{let o=!0;const r=this.formModel[t.id];return t.required&&t.validator&&(t.validator(r)?t.invalid=!1:(t.invalid=!0,o=!1)),console.log(t,r,o),o},this.updateModel=(t,o)=>{"dateOfBirth"===o.id&&(this.formModel.age=t?String(this._sharedService.calculateAge(t)):null),this.submitTried&&this.validator(o)},this.validate=()=>{let t=!0;const o=r=>{this.validator(r)||(t=!1)};return this.formControls1.forEach(o),o(this.addressControl),this.formControls2.forEach(o),t},this.submit=()=>{this.submitTried=!0,this.validate()&&(this.loading=!0,this.subscription=this._physicianService.addPhysician(this.formModel).subscribe(o=>{console.log(o),this._sharedService.toast.showSuccess({heading:"Success",message:o.msg}),this._router.navigate(["/physician"])},({error:o})=>{console.log(o),this._sharedService.toast.showError({heading:"Error",message:o.msg}),this.loading=!1}))},this.back=()=>{this._router.navigate(["/physician"])}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#i=this.\u0275fac=function(n){return new(n||s)(i.Y36(u.F0),i.Y36(h.E),i.Y36(y.R),i.Y36(m.F))};static#e=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-add-physician"]],decls:8,vars:5,consts:[[1,"card","flex","flex-wrap"],["class","field col-12 md:col-4 py-2",4,"ngFor","ngForOf"],[1,"field","col-12","md:col-8","py-2"],[3,"property","value","valueChange"],[1,"col-12","flex","justify-content-between"],["pButton","","pRipple","","type","button","label","Back","icon","pi pi-arrow-left","iconPos","left",1,"p-button-outlined","p-button-raised","p-button-danger",3,"click"],["pButton","","pRipple","","type","button","label","Submit",1,"p-button-outlined","p-button-raised","p-button-success",3,"loading","click"],[1,"field","col-12","md:col-4","py-2"]],template:function(n,e){1&n&&(i.TgZ(0,"div",0),i.YNc(1,w,2,2,"div",1),i.TgZ(2,"div",2)(3,"app-common-input",3),i.NdJ("valueChange",function(t){return e.formModel[e.addressControl.id]=t})("valueChange",function(t){return e.updateModel(t,e.addressControl)}),i.qZA()(),i.YNc(4,E,2,2,"div",1),i.TgZ(5,"div",4)(6,"button",5),i.NdJ("click",function(){return e.back()}),i.qZA(),i.TgZ(7,"button",6),i.NdJ("click",function(){return e.submit()}),i.qZA()()()),2&n&&(i.xp6(1),i.Q6J("ngForOf",e.formControls1),i.xp6(2),i.Q6J("property",e.addressControl)("value",e.formModel[e.addressControl.id]),i.xp6(1),i.Q6J("ngForOf",e.formControls2),i.xp6(3),i.Q6J("loading",e.loading))},dependencies:[f.sg,v.Hq,C.v]})}return s})();var Z=d(6676),D=d.n(Z);function F(s,c){if(1&s&&(i.TgZ(0,"div",4)(1,"div",5),i._uU(2),i.qZA(),i.TgZ(3,"div",6),i._uU(4,":"),i.qZA(),i.TgZ(5,"div",7),i._uU(6),i.qZA()()),2&s){const a=c.$implicit,n=i.oxw();i.xp6(2),i.hij(" ",a.label," "),i.xp6(4),i.hij(" ",n.formModel[a.field]," ")}}function O(s,c){if(1&s){const a=i.EpF();i.TgZ(0,"div",7)(1,"app-common-input",3),i.NdJ("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.formModel[t.id]=e)})("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.updateModel(e,t))}),i.qZA()()}if(2&s){const a=c.$implicit,n=i.oxw();i.xp6(1),i.Q6J("property",a)("value",n.formModel[a.id])}}function q(s,c){if(1&s){const a=i.EpF();i.TgZ(0,"div",7)(1,"app-common-input",3),i.NdJ("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.formModel[t.id]=e)})("valueChange",function(e){const t=i.CHM(a).$implicit,o=i.oxw();return i.KtG(o.updateModel(e,t))}),i.qZA()()}if(2&s){const a=c.$implicit,n=i.oxw();i.xp6(1),i.Q6J("property",a)("value",n.formModel[a.id])}}const B=[{path:"",component:A},{path:"add",component:V},{path:"view/:id",component:(()=>{class s{constructor(a,n,e,l){this._router=a,this._activatedRoute=n,this._physicianService=e,this._sharedService=l,this.subscription=[],this.formModel={},this.loading=!1,this.formControls1=[{label:"First Name",field:"firstName"},{label:"Last Name",field:"lastName"},{label:"Date of Birth",field:"dateOfBirth"},{label:"Age",field:"age"},{label:"Sex",field:"gender"},{label:"Specialist",field:"specialist"},{label:"Education",field:"education"},{label:"License No",field:"licenseNo"},{label:"Address",field:"address"},{label:"City",field:"city"},{label:"State",field:"state"},{label:"Zip",field:"zipCode"},{label:"Phone",field:"phoneNumber"},{label:"Email",field:"email"}],this.edit=()=>this._router.navigate(["/physician","edit",this.formModel.id]),this.back=()=>this._router.navigate(["/physician"])}ngOnInit(){this.loading=!0,this.subscription.push(this._activatedRoute.params.subscribe(a=>{const{id:n}=a;this.loading=!1,this.subscription.push(this._physicianService.getPhysician(n).subscribe(e=>{this.formModel=JSON.parse(JSON.stringify(e)),this.formModel.dateOfBirth=new Date(this.formModel.dateOfBirth),this.formModel.age=this._sharedService.calculateAge(this.formModel.dateOfBirth),this.formModel.dateOfBirth=D()(this.formModel.dateOfBirth).format("Do MMMM YYYY"),this.formModel.id=String(a.id)}))}))}ngOnDestroy(){this.subscription&&this.subscription.length>0&&this.subscription.forEach(a=>a.unsubscribe())}static#i=this.\u0275fac=function(n){return new(n||s)(i.Y36(u.F0),i.Y36(u.gz),i.Y36(h.E),i.Y36(m.F))};static#e=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-view-physician"]],decls:4,vars:1,consts:[[1,"card","flex","flex-wrap"],["class","flex col-12 md:col-6",4,"ngFor","ngForOf"],[1,"col-12","flex","justify-content-between"],["pButton","","pRipple","","type","button","label","Back","icon","pi pi-arrow-left","iconPos","left",1,"p-button-outlined","p-button-raised","p-button-danger",3,"click"],[1,"flex","col-12","md:col-6"],[1,"col-4","font-bold","p-0"],[1,"col-1","text-center","p-0"],[1,"col","p-0"]],template:function(n,e){1&n&&(i.TgZ(0,"div",0),i.YNc(1,F,7,2,"div",1),i.TgZ(2,"div",2)(3,"button",3),i.NdJ("click",function(){return e.back()}),i.qZA()()()),2&n&&(i.xp6(1),i.Q6J("ngForOf",e.formControls1))},dependencies:[f.sg,v.Hq]})}return s})()},{path:"edit/:id",component:(()=>{class s{constructor(a,n,e,l,t){this._router=a,this._activatedRoute=n,this._physicianService=e,this._validationService=l,this._sharedService=t,this.subscription=[],this.formModel={},this.loading=!1,this.formControls1=[{label:"First Name",required:!0,inputType:"Name",id:"firstName",validator:this._validationService.nameValidator},{label:"Last Name",required:!0,inputType:"Name",id:"lastName",validator:this._validationService.nameValidator},{label:"Date of Birth",inputType:"Date",required:!0,id:"dateOfBirth",maxDate:new Date,validator:o=>this._validationService.dateValidator(o)&&o<new Date},{label:"Age",inputType:"Name",id:"age",disabled:!0,maxLength:3,validator:this._validationService.numberValidator},{label:"Sex",inputType:"Dropdown",options:["Male","Female","Other"],optionTypeStr:!0,id:"gender",validator:this._validationService.emptyValueValidator},{label:"Specialist",required:!0,inputType:"AutoComplete",id:"specialist",suggestions:["General","Cardiologist","Pediatrician","Neurologist"],validator:this._validationService.emptyValueValidator},{label:"Education",required:!0,inputType:"Text",id:"education",validator:this._validationService.emptyValueValidator},{label:"License No",required:!0,inputType:"Text",id:"licenseNo",validator:this._validationService.emptyValueValidator}],this.addressControl={label:"Address",required:!0,inputType:"TextArea",id:"address",rows:2,validator:this._validationService.stringValidator,maxLength:500},this.formControls2=[{label:"City",required:!0,inputType:"AutoComplete",id:"city",validator:this._validationService.stringValidator,suggestions:b},{label:"State",required:!0,inputType:"Dropdown",id:"state",validator:this._validationService.emptyValueValidator,options:g},{label:"Zip",required:!0,inputType:"Number",id:"zipCode",maxLength:6,validator:this._validationService.zipCodeValidator},{label:"Phone",required:!0,inputType:"Number",id:"phoneNumber",maxLength:10,validator:this._validationService.phoneValidator,preAddon:"pi-phone"},{label:"Email",required:!0,inputType:"Text",id:"email",validator:this._validationService.emailValidator,preAddon:"pi-envelope"}],this.submitTried=!1,this.validator=o=>{let r=!0;const p=this.formModel[o.id];return o.required&&o.validator&&(o.validator(p)?o.invalid=!1:(o.invalid=!0,r=!1)),console.log(o,p,r),r},this.updateModel=(o,r)=>{"dateOfBirth"===r.id&&(this.formModel.age=o?String(this._sharedService.calculateAge(o)):null),this.submitTried&&this.validator(r)},this.validate=()=>{let o=!0;const r=p=>{this.validator(p)||(o=!1)};return this.formControls1.forEach(r),r(this.addressControl),this.formControls2.forEach(r),o},this.submit=()=>{this.submitTried=!0,this.validate()?(this.loading=!0,this.subscription.push(this._physicianService.updatePhysician(this.formModel).subscribe(r=>{console.log(r),this._sharedService.toast.showSuccess({heading:"Success",message:r.msg}),this._router.navigate(["/physician"])},({error:r})=>{console.log(r),this._sharedService.toast.showError({heading:"Error",message:r.msg})},()=>{this.loading=!1}))):this._sharedService.toast.showError({heading:"Error",message:"Please enter the required fields"})},this.back=()=>{this._router.navigate(["/physician"])}}ngOnInit(){this.loading=!0,this.subscription.push(this._activatedRoute.params.subscribe(a=>{const{id:n}=a;this.loading=!1,this.subscription.push(this._physicianService.getPhysician(n).subscribe(e=>{this.formModel=JSON.parse(JSON.stringify(e)),this.formModel.dateOfBirth=new Date(this.formModel.dateOfBirth),this.formModel.id=String(a.id)}))}))}ngOnDestroy(){this.subscription&&this.subscription.length>0&&this.subscription.forEach(a=>a.unsubscribe())}static#i=this.\u0275fac=function(n){return new(n||s)(i.Y36(u.F0),i.Y36(u.gz),i.Y36(h.E),i.Y36(y.R),i.Y36(m.F))};static#e=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-edit-physician"]],decls:8,vars:5,consts:[[1,"card","flex","flex-wrap"],["class","field col-12 md:col-4 py-2",4,"ngFor","ngForOf"],[1,"field","col-12","md:col-8","py-2"],[3,"property","value","valueChange"],[1,"col-12","flex","justify-content-between"],["pButton","","pRipple","","type","button","label","Back","icon","pi pi-arrow-left","iconPos","left",1,"p-button-outlined","p-button-raised","p-button-danger",3,"click"],["pButton","","pRipple","","type","button","label","Submit",1,"p-button-outlined","p-button-raised","p-button-success",3,"loading","click"],[1,"field","col-12","md:col-4","py-2"]],template:function(n,e){1&n&&(i.TgZ(0,"div",0),i.YNc(1,O,2,2,"div",1),i.TgZ(2,"div",2)(3,"app-common-input",3),i.NdJ("valueChange",function(t){return e.formModel[e.addressControl.id]=t})("valueChange",function(t){return e.updateModel(t,e.addressControl)}),i.qZA()(),i.YNc(4,q,2,2,"div",1),i.TgZ(5,"div",4)(6,"button",5),i.NdJ("click",function(){return e.back()}),i.qZA(),i.TgZ(7,"button",6),i.NdJ("click",function(){return e.submit()}),i.qZA()()()),2&n&&(i.xp6(1),i.Q6J("ngForOf",e.formControls1),i.xp6(2),i.Q6J("property",e.addressControl)("value",e.formModel[e.addressControl.id]),i.xp6(1),i.Q6J("ngForOf",e.formControls2),i.xp6(3),i.Q6J("loading",e.loading))},dependencies:[f.sg,v.Hq,C.v]})}return s})()}];let Y=(()=>{class s{static#i=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=i.oAB({type:s});static#t=this.\u0275inj=i.cJS({imports:[u.Bz.forChild(B),u.Bz]})}return s})();var k=d(2692);let R=(()=>{class s{static#i=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=i.oAB({type:s});static#t=this.\u0275inj=i.cJS({imports:[k.R,Y]})}return s})()}}]);